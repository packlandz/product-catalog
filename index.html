<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Product Catalog</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
    }

    main {
      flex: 3;
      padding: 20px;
    }

    #right-sidebar {
      flex: 1;
      background-color: #f9f9f9;
      padding: 20px;
      border-left: 1px solid #ddd;
    }

    h1, h2 {
      margin: 0 0 15px;
    }

    #category-nav a {
      margin-right: 10px;
    }

    #product-form input,
    #product-form textarea,
    #product-form select {
      padding: 5px;
      margin: 5px;
    }

    #product-form button {
      padding: 5px 10px;
      margin: 5px;
    }

    #product-container {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 20px;
    }

    .product-card {
      border: 1px solid #ccc;
      padding: 10px;
      width: 200px;
    }

    .product-card img {
      width: 100%;
      height: 100px;
      object-fit: cover;
    }

    .product-card button {
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <main>
    <h1>Product Catalog</h1>

    <div id="category-nav">
      <a href="#" onclick="filterByCategory('All')">All</a>
      <a href="#" onclick="filterByCategory('Best Sellers')">Best Sellers</a>
      <a href="#" onclick="filterByCategory('Flower')">Flower</a>
      <a href="#" onclick="filterByCategory('Concentrates')">Concentrates</a>
      <a href="#" onclick="filterByCategory('Carts')">Carts</a>
      <a href="#" onclick="filterByCategory('Disposables')">Disposables</a>
      <a href="#" onclick="filterByCategory('Edibles')">Edibles</a>
      <a href="#" onclick="filterByCategory('Miscellaneous')">Miscellaneous</a>
    </div>

    <div id="product-container">
      <p>No products found.</p>
    </div>

    <h2>Add / Edit Product</h2>
    <form id="product-form">
      <input type="text" id="name" placeholder="Product Name" required />
      <input type="text" id="brand" placeholder="Brand" required />
      <textarea id="description" placeholder="Description"></textarea>
      <input type="number" id="price" placeholder="Price" required />
      <input type="url" id="image" placeholder="Image URL" />
      <select id="category">
        <option value="">Select Category</option>
        <option value="Best Sellers">Best Sellers</option>
        <option value="Flower">Flower</option>
        <option value="Concentrates">Concentrates</option>
        <option value="Carts">Carts</option>
        <option value="Disposables">Disposables</option>
        <option value="Edibles">Edibles</option>
        <option value="Miscellaneous">Miscellaneous</option>
      </select>
      <button type="submit">Save Product</button>
    </form>
  </main>

  <div id="right-sidebar">
    <h2>Stay Connected</h2>
    <p>Join our Telegram channel for updates and offers!</p>
    <a href="https://t.me/yourchannel" target="_blank">
      <button>Join on Telegram</button>
    </a>

    <div id="search-bar">
      <input type="text" id="searchInput" placeholder="Search products..." />
    </div>
  </div>

  <script>
    const productContainer = document.getElementById("product-container");
    const searchInput = document.getElementById("searchInput");
    const productForm = document.getElementById("product-form");

    // Replace with Firebase fetch if needed
    let products = [];

    function displayProducts(filteredProducts) {
      productContainer.innerHTML = "";
      if (filteredProducts.length === 0) {
        productContainer.innerHTML = "<p>No products found.</p>";
        return;
      }
      filteredProducts.forEach(product => {
        const card = document.createElement("div");
        card.className = "product-card";
        card.innerHTML = `
          <img src="${product.image}" alt="${product.name}" />
          <h3>${product.name}</h3>
          <p><strong>Brand:</strong> ${product.brand}</p>
          <p>${product.description}</p>
          <p><strong>Price:</strong> $${product.price}</p>
          <p><strong>Category:</strong> ${product.category}</p>
        `;
        productContainer.appendChild(card);
      });
    }

    function filterByCategory(category) {
      if (category === 'All') {
        displayProducts(products);
      } else {
        const filtered = products.filter(p => p.category === category);
        displayProducts(filtered);
      }
    }

    searchInput.addEventListener("input", () => {
      const query = searchInput.value.toLowerCase();
      const filtered = products.filter(p =>
        p.name.toLowerCase().includes(query) ||
        p.brand.toLowerCase().includes(query) ||
        p.description.toLowerCase().includes(query)
      );
      displayProducts(filtered);
    });

    productForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const newProduct = {
        name: document.getElementById("name").value,
        brand: document.getElementById("brand").value,
        description: document.getElementById("description").value,
        price: document.getElementById("price").value,
        image: document.getElementById("image").value,
        category: document.getElementById("category").value,
      };
      products.push(newProduct);
      displayProducts(products);
      productForm.reset();
    });

    // Initial dummy data (remove when using Firebase)
    products = [
      {
        name: "Pineapple Express",
        brand: "Dank Co",
        description: "Hybrid strain great for daytime use.",
        price: 35,
        image: "https://via.placeholder.com/150",
        category: "Carts"
      },
      {
        name: "OG Kush",
        brand: "Herbal Co",
        description: "Classic indica strain.",
        price: 30,
        image: "https://via.placeholder.com/150",
        category: "Flower"
      }
    ];

    displayProducts(products);
  </script>
</body>
</html>
