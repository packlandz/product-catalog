<!-- Keep everything as you posted â€” just make sure this part is updated with your Firebase config -->
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBg--ptpq9wlQNH1HK-SRe88aDx1_yO7yQ",
    authDomain: "project-3390921463634312663.firebaseapp.com",
    projectId: "project-3390921463634312663",
    storageBucket: "project-3390921463634312663.firebasestorage.app",
    messagingSenderId: "451857573630",
    appId: "1:451857573630:web:94f4ee25f65ef4967ae7af"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const productsRef = db.collection("products");

  let products = [];

  function fetchProducts(category = "all", searchTerm = "") {
    productsRef.get().then(snapshot => {
      products = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

      let filtered = category === "all"
        ? products
        : products.filter(p => p.category === category);

      if (searchTerm) {
        const lower = searchTerm.toLowerCase();
        filtered = filtered.filter(p =>
          p.name.toLowerCase().includes(lower) ||
          p.brand.toLowerCase().includes(lower) ||
          p.desc.toLowerCase().includes(lower)
        );
      }

      renderProducts(filtered);
    });
  }

  function renderProducts(list) {
    const container = document.getElementById("product-container");
    container.innerHTML = "";

    if (list.length === 0) {
      container.innerHTML = `<p style="text-align:center;">No products found.</p>`;
      return;
    }

    list.forEach((product, index) => {
      const card = document.createElement("div");
      card.className = "product-card";
      card.innerHTML = `
        <img src="${product.image || 'https://via.placeholder.com/150'}" alt="${product.name}">
        <h2>${product.name}</h2>
        <p class="brand">${product.brand}</p>
        <p class="description">${product.desc}</p>
        <span class="price">$${(product.price || 0).toFixed(2)}</span>
        <div>
          <button class="btn edit" onclick="editProduct(${index})">Edit</button>
          <button class="btn delete" onclick="deleteProduct(${index})">Delete</button>
        </div>
      `;
      container.appendChild(card);
    });
  }

  function handleHashChange() {
    const category = location.hash.replace("#", "") || "all";
    const searchTerm = document.getElementById("searchInput").value.trim();
    fetchProducts(category, searchTerm);
  }

  function editProduct(index) {
    const p = products[index];
    document.getElementById('editIndex').value = index;
    document.getElementById('name').value = p.name;
    document.getElementById('brand').value = p.brand;
    document.getElementById('desc').value = p.desc;
    document.getElementById('price').value = p.price;
    document.getElementById('image').value = p.image;
    document.getElementById('category').value = p.category;
    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
  }

  function deleteProduct(index) {
    const id = products[index].id;
    if (confirm("Delete this product?")) {
      productsRef.doc(id).delete().then(() => {
        handleHashChange();
      });
    }
  }

  document.getElementById("product-form").addEventListener("submit", function(e) {
    e.preventDefault();
    const name = document.getElementById('name').value.trim();
    const brand = document.getElementById('brand').value.trim();
    const desc = document.getElementById('desc').value.trim();
    const price = parseFloat(document.getElementById('price').value);
    const image = document.getElementById('image').value.trim();
    const category = document.getElementById('category').value;
    const index = document.getElementById('editIndex').value;

    const product = { name, brand, desc, price, image, category };

    if (index) {
      const id = products[index].id;
      productsRef.doc(id).set(product).then(() => {
        this.reset();
        document.getElementById('editIndex').value = '';
        handleHashChange();
      });
    } else {
      productsRef.add(product).then(() => {
        this.reset();
        document.getElementById('editIndex').value = '';
        handleHashChange();
      });
    }
  });

  document.getElementById("searchInput").addEventListener("input", handleHashChange);
  window.addEventListener("hashchange", handleHashChange);
  window.addEventListener("load", handleHashChange);
</script>
